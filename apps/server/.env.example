# Bun Server Configuration

# Server port (default: 8080)
PORT=8080

# Server hostname (default: 0.0.0.0)
HOST=0.0.0.0

# REQUIRED: JWT secret for authentication (must match website's JWT_SECRET)
# Generate a secure random string at least 32 characters long
# Example: openssl rand -base64 32
JWT_SECRET=your-secure-jwt-secret-at-least-32-characters-long

# REQUIRED: Discord OAuth Configuration
# Get these from https://discord.com/developers/applications
# Create a Discord application and configure OAuth2 redirect URIs
DISCORD_CLIENT_ID=your-discord-client-id
DISCORD_CLIENT_SECRET=your-discord-client-secret
# Optional: Override the default redirect URI (defaults to http://localhost:5173/auth/desktop/callback)
# DISCORD_REDIRECT_URI=https://picologs.com/auth/desktop/callback

# REQUIRED: API key for authenticating /broadcast endpoint requests
# Generate a secure random string (e.g., using: openssl rand -base64 32)
BROADCAST_API_KEY=your-secure-api-key-here

# REQUIRED: Neon PostgreSQL database connection string
# Get this from your Neon dashboard
DATABASE_URL=postgresql://user:password@host/database

# Tigris Storage (Fly.io) - Avatar Uploads
# Create with: flyctl storage create -n <bucket-name> -o personal -p -y
# Fly.io automatically sets these secrets when you create a bucket
BUCKET_NAME=picologs-uploads
AWS_ACCESS_KEY_ID=your-tigris-access-key-id
AWS_SECRET_ACCESS_KEY=your-tigris-secret-access-key
AWS_ENDPOINT_URL_S3=https://fly.storage.tigris.dev
AWS_REGION=auto

# CORS Configuration
# Comma-separated list of allowed origins for CORS requests
# Development: http://localhost:5173
# Production: https://picologs.com
ALLOWED_ORIGINS=http://localhost:5173,https://picologs.com

# Environment Configuration
# NODE_ENV controls the demo WebSocket endpoint (/demo) allowed origins
# Development (NODE_ENV != production): localhost:5173, localhost:1420
# Production (NODE_ENV = production): https://picologs.com
NODE_ENV=development

# Demo WebSocket Endpoint (/demo)
# Public read-only WebSocket endpoint for the homepage demo feed
# - No authentication required (origin-restricted based on NODE_ENV)
# - Auto-subscribes to mock-player-demo logs on connection
# - Read-only (clients cannot send messages)
# - Development origins: localhost:5173, localhost:1420
# - Production origins: https://picologs.com
# Note: No configuration needed - works automatically with mock service

# Mock Player Service Configuration (Development Only)
# Enable the mock player service that simulates a real Star Citizen player
# streaming live gameplay logs via WebSocket. Used for demos and testing.
MOCK_SERVICE_ENABLED=false
MOCK_PLAYER_DISCORD_ID=mock-player-demo
MOCK_PLAYER_NAME=DemoPlayer
MOCK_WS_URL=ws://localhost:8080/ws
# Generate token with: bun run mock:setup
MOCK_JWT_TOKEN=

# Example production configuration:
# PORT=8080
# HOST=0.0.0.0
# BROADCAST_API_KEY=RaNd0mS3cur3K3yG3n3rat3dW1thOp3nSSL
# DATABASE_URL=postgresql://user:password@ep-example-123456.us-east-2.aws.neon.tech/neondb
# ALLOWED_ORIGINS=https://picologs.com
