# Picologs Self-Hosting Environment Configuration
# Copy this file and customize for your setup
#
# Quick start:
#   cp .env.example .env
#   # Edit values below
#   docker compose up -d
#
# For app-specific configs, also copy:
#   cp .env.example apps/server/.env
#   cp .env.example apps/website/.env
#   cp apps/desktop/.env.example apps/desktop/.env

# ============================================================================
# REQUIRED - Core Authentication
# ============================================================================

# JWT secret for signing tokens (MUST be identical across server and website)
# Generate with: openssl rand -base64 32
JWT_SECRET=your-secure-jwt-secret-at-least-32-characters-long

# Discord OAuth Configuration
# Create app at: https://discord.com/developers/applications
DISCORD_CLIENT_ID=your-discord-client-id
DISCORD_CLIENT_SECRET=your-discord-client-secret

# OAuth callback URL (must match Discord app settings)
# Development: http://localhost:5173/auth/callback
# Production: https://your-domain.com/auth/callback
DISCORD_REDIRECT_URI=http://localhost:5173/auth/callback

# ============================================================================
# REQUIRED - Database (Neon PostgreSQL)
# ============================================================================

# PostgreSQL connection string
# Neon (recommended): Get from https://neon.tech dashboard
# Local: postgresql://postgres:postgres@localhost:5432/picologs
DATABASE_URL=postgresql://user:password@host/database

# ============================================================================
# REQUIRED - File Storage (S3-compatible)
# ============================================================================

# For local development with MinIO:
#   AWS_ACCESS_KEY_ID=minioadmin
#   AWS_SECRET_ACCESS_KEY=minioadmin
#   AWS_ENDPOINT_URL_S3=http://localhost:9000
#   BUCKET_NAME=picologs-uploads

# For production with Tigris (Fly.io) or AWS S3:
AWS_ACCESS_KEY_ID=your-access-key-id
AWS_SECRET_ACCESS_KEY=your-secret-access-key
AWS_ENDPOINT_URL_S3=https://fly.storage.tigris.dev
AWS_REGION=auto
BUCKET_NAME=picologs-uploads

# Public URL for serving uploaded files (avatars)
# MinIO: http://localhost:9000/picologs-uploads
# Tigris: https://your-bucket.fly.storage.tigris.dev
# Custom CDN: https://cdn.your-domain.com
R2_PUBLIC_DOMAIN=http://localhost:9000/picologs-uploads

# ============================================================================
# SERVER CONFIGURATION (apps/server)
# ============================================================================

# Server port and host
PORT=8080
HOST=0.0.0.0

# API key for /broadcast endpoint (server-to-server calls)
# Generate with: openssl rand -base64 32
BROADCAST_API_KEY=your-secure-api-key-here

# CORS - comma-separated list of allowed origins
# Development: http://localhost:5173,http://localhost:1420
# Production: https://your-domain.com
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:1420

# Environment mode
NODE_ENV=development

# ============================================================================
# WEBSITE CONFIGURATION (apps/website)
# ============================================================================

# Public URL for the website
PUBLIC_URL=http://localhost:5173

# SvelteKit origin
ORIGIN=http://localhost:5173

# WebSocket server URLs
# Server-side (for auth callbacks): http://localhost:8080
# Client-side (browser WebSocket): ws://localhost:8080/ws
WEBSOCKET_SERVER_URL=http://localhost:8080
PUBLIC_WS_URL=ws://localhost:8080/ws

# ============================================================================
# DESKTOP CONFIGURATION (apps/desktop/.env)
# ============================================================================

# Desktop app uses VITE_ prefixed variables in apps/desktop/.env
# See apps/desktop/.env.example for desktop-specific configuration

# ============================================================================
# OPTIONAL - Mock Service (for demo/testing)
# ============================================================================

# Enable mock player service for demo feeds
MOCK_SERVICE_ENABLED=false
MOCK_PLAYER_DISCORD_ID=mock-player-demo
MOCK_PLAYER_NAME=DemoPlayer
MOCK_WS_URL=ws://localhost:8080/ws
# Generate with: bun run mock:setup (in apps/server)
MOCK_JWT_TOKEN=

# ============================================================================
# OPTIONAL - Development
# ============================================================================

# GitHub token for private packages (if using @space-man-rob/shared-svelte)
# Generate at: https://github.com/settings/tokens (needs read:packages scope)
# Set via: export GITHUB_TOKEN=$(gh auth token)
# GITHUB_TOKEN=ghp_your_github_personal_access_token_here
